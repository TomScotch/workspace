FROM lukovkin/dockerfile-cuda-tensorflow-keras
RUN apt-get update -y
RUN apt-get install -y python-dev python-pip python-nose libopenblas-dev git
RUN apt-get install -y python-numpy python-scipy
RUN pip install theano
RUN pip install h5py
RUN pip install keras
RUN apt-get install g++
RUN apt-get install -y unzip libopenblas-base
RUN pip install spacy
RUN python -m spacy.en.download all --force
RUN pip install scikit-learn
RUN pip install progressbar
RUN apt-get install -y libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler
RUN apt-get install -y --no-install-recommends libboost-all-dev
RUN pip install pip --upgrade
RUN pip install tensorflow-gpu
RUN wget https://bootstrap.pypa.io/get-pip.py
RUN python get-pip.py
ENV DEBIAN_FRONTEND noninteractive
RUN apt-get update -y && apt-get install -y git python-dev python-numpy build-essential python-pip python-virtualenv swig python-wheel libcurl3-dev
RUN echo "deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8" | sudo tee /etc/apt/sources.list.d/bazel.list
RUN curl https://bazel.build/bazel-release.pub.gpg | sudo apt-key add -
RUN apt-get -y -q install software-properties-common htop
RUN add-apt-repository ppa:webupd8team/java
RUN apt-get -y -q update
RUN echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections
RUN echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections
RUN apt-get -y -q install oracle-java8-installer
RUN apt-get -y -q install oracle-java7-installer
RUN update-java-alternatives -s java-8-oracle
RUN apt-get install -y bazel
RUN apt-get upgrade bazel -y --force-yes
RUN cd /opt/ && git clone https://github.com/tensorflow/tensorflow
WORKDIR /opt/tensorflow/
#RUN ./configure
#RUN bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package
#RUN bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg
#RUN cd /opt/ && git clone https://github.com/avisingh599/visual-qa.git
#WORKDIR /opt/visual-qa/scripts
#RUN chmod +x get_started.sh
#RUN ./get_started.sh
